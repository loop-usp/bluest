{
	"name": "Event sheet_Snake",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "HOME",
					"sid": 153815004192107
				}
			],
			"actions": [
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 765266620365250,
					"parameters": {
						"layout": "Layout_Principal"
					}
				}
			],
			"sid": 699400154231159
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "VOLTAR_SNAKE",
					"sid": 645565654404515
				}
			],
			"actions": [
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 635043680626024,
					"parameters": {
						"layout": "Restaurante"
					}
				}
			],
			"sid": 520320573428110
		},
		{
			"eventType": "comment",
			"text": "No início do jogo, mostramos a pontuação atual, definimos a variável global [i]alive[/i] como verdadeira, o que permite ao jogo saber que tem de mover a cobra regularmente e que o jogo não acabou, a função [i][b]spawnStartSnake[/b][/i] que spawna até [i]length[/i] instâncias da cobra para iniciar o jogo."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 203254221356772
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "txtScore",
					"sid": 132676520621951,
					"parameters": {
						"text": "\"Score: \" & eaten"
					}
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 269089362524621,
					"parameters": {
						"variable": "alive",
						"value": "true"
					}
				},
				{
					"callFunction": "spawnStartSnake",
					"sid": 386164506862681
				}
			],
			"sid": 742815210880025
		},
		{
			"eventType": "comment",
			"text": "Variáveis globais do jogo"
		},
		{
			"eventType": "variable",
			"name": "length",
			"type": "number",
			"initialValue": "5",
			"comment": "comprimento da cobra (número de instâncias)",
			"isStatic": false,
			"isConstant": false,
			"sid": 106193506010678
		},
		{
			"eventType": "variable",
			"name": "freq",
			"type": "number",
			"initialValue": "0.35",
			"comment": "tempo entre os movimentos da cobra (em segundos)",
			"isStatic": false,
			"isConstant": false,
			"sid": 638451955604470
		},
		{
			"eventType": "variable",
			"name": "lastUID",
			"type": "number",
			"initialValue": "0",
			"comment": "UID da última parte da cobra",
			"isStatic": false,
			"isConstant": false,
			"sid": 527962042173416
		},
		{
			"eventType": "variable",
			"name": "alive",
			"type": "boolean",
			"initialValue": "true",
			"comment": "cobra esta viva e movimentando",
			"isStatic": false,
			"isConstant": false,
			"sid": 744790642049672
		},
		{
			"eventType": "variable",
			"name": "eaten",
			"type": "number",
			"initialValue": "0",
			"comment": "número de elementos comidos",
			"isStatic": false,
			"isConstant": false,
			"sid": 159234205323130
		},
		{
			"eventType": "variable",
			"name": "eatenMod",
			"type": "number",
			"initialValue": "1",
			"comment": "número utilizado na comparação do modulo",
			"isStatic": false,
			"isConstant": false,
			"sid": 428971750454639
		},
		{
			"eventType": "variable",
			"name": "iterations",
			"type": "number",
			"initialValue": "0",
			"comment": "número de vezes que o número do modulo foi utilizado",
			"isStatic": false,
			"isConstant": false,
			"sid": 134328408853525
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 197388734520943
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 295514649036514,
					"parameters": {
						"variable": "eaten",
						"value": "0"
					}
				}
			],
			"sid": 451874651418615
		},
		{
			"eventType": "comment",
			"text": "spawna a cobra inicial"
		},
		{
			"functionName": "spawnStartSnake",
			"functionDescription": "",
			"functionCategory": "init",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 392114263750090,
			"children": [
				{
					"eventType": "variable",
					"name": "headX",
					"type": "number",
					"initialValue": "0",
					"comment": "posição X da cabeça (X em pixels)",
					"isStatic": false,
					"isConstant": false,
					"sid": 107724375361148
				},
				{
					"eventType": "variable",
					"name": "headY",
					"type": "number",
					"initialValue": "0",
					"comment": "posição Y da cabeça (Y em pixels)",
					"isStatic": false,
					"isConstant": false,
					"sid": 167043387999481
				},
				{
					"eventType": "comment",
					"text": "existe uma primeira instância na disposição, que está definida para ser a [i]head[/i] da serpente que colidirá com [b]toEat[/b] objetos guardamos na memória a sua posição atual X e Y no esquema para usar como referência para as outras instâncias spawnadas"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "snake",
							"sid": 374265999574176,
							"parameters": {
								"instance-variable": "head"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 241556973825551,
							"parameters": {
								"variable": "headX",
								"value": "snake.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 148828389477263,
							"parameters": {
								"variable": "headY",
								"value": "snake.Y"
							}
						}
					],
					"sid": 815295008894171
				},
				{
					"eventType": "comment",
					"text": "fazemos um loop de 1 (instância existente) até [i]length[/i] para spawnar o número apropriado de [b]snake [b]instances[/b] no início do jogo"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 921678070556765,
							"parameters": {
								"name": "\"snake\"",
								"start-index": "1",
								"end-index": "length"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 138115035160336,
							"parameters": {
								"object-to-create": "snake",
								"layer": "0",
								"x": "headX - (snake.Width * loopindex(\"snake\"))",
								"y": "headY",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "asseguramos que só temos uma única [i]head[/i] para a cobra, definindo o valor da variável de instância como falso em novas instâncias "
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "snake",
							"sid": 744199508925333,
							"parameters": {
								"instance-variable": "head",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "[i]lastUID[/i] é o Identificador Único da última instância da cobra. Mantemos como referência para quando precisamos de criar uma nova instância [b]snake[/b] na função [i][b]spawnSnakePart[/b][/i] ev.24"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 437173474509272,
							"parameters": {
								"variable": "lastUID",
								"value": "snake.UID"
							}
						}
					],
					"sid": 873575391673486
				}
			]
		},
		{
			"eventType": "comment",
			"text": "função principal para mover a serpente"
		},
		{
			"functionName": "moveSnake",
			"functionDescription": "",
			"functionCategory": "move",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 400979028690916,
			"children": [
				{
					"eventType": "comment",
					"text": "primeiro movemos a cabeça chamando a função dedicada [i][b]moveHead[/b][/i]\n[i][b]setNextPos[/b][/i] é então chamado para manter na memória a posição anterior daquela instância que será aplicada à instância seguinte ao mover a serpente"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "snake",
							"sid": 822051873595266,
							"parameters": {
								"instance-variable": "head"
							}
						}
					],
					"actions": [
						{
							"callFunction": "moveHead",
							"sid": 103188762904587,
							"parameters": [
								"snake.UID"
							]
						},
						{
							"callFunction": "setNextPos",
							"sid": 580501862598204,
							"parameters": [
								"snake.UID"
							]
						}
					],
					"sid": 976487565923841
				},
				{
					"eventType": "comment",
					"text": "depois movemos as instâncias restantes [b]snake[/b], uma por uma, chamando a função dedicada [i][b]movePos[/b][/i]."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "snake",
							"sid": 827450427662105,
							"parameters": {
								"instance-variable": "head"
							},
							"isInverted": true
						},
						{
							"id": "for-each-ordered",
							"objectClass": "System",
							"sid": 678518367400491,
							"parameters": {
								"object": "snake",
								"expression": "snake.IID",
								"order": "ascending"
							}
						}
					],
					"actions": [
						{
							"callFunction": "movePos",
							"sid": 368108351827061,
							"parameters": [
								"snake.UID"
							]
						},
						{
							"callFunction": "setNextPos",
							"sid": 767646989974854,
							"parameters": [
								"snake.UID"
							]
						}
					],
					"sid": 223300206659462
				}
			]
		},
		{
			"functionName": "moveHead",
			"functionDescription": "",
			"functionCategory": "move",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "snakeUID",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of the snake instance to apply to",
					"sid": 905321327746545
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 999653952120769,
			"children": [
				{
					"eventType": "comment",
					"text": "a função foi passada a UID para a instância a fim de escolher apenas aquela instância [b]snake[/b] específica "
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "snake",
							"sid": 882502285735074,
							"parameters": {
								"unique-id": "snakeUID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "guardamos em memória a sua instância anterior X e Y, na coordenada do grid"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "snake",
							"sid": 852851974553035,
							"parameters": {
								"instance-variable": "prevX",
								"value": "snake.TileMovement.GridX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "snake",
							"sid": 254126526536360,
							"parameters": {
								"instance-variable": "prevY",
								"value": "snake.TileMovement.GridY"
							}
						}
					],
					"sid": 938982564366411,
					"children": [
						{
							"eventType": "comment",
							"text": "dependendo do valor actual da variável de instância [i]dir[/i] (direção) , movemos a cabeça da cobra no grid TileMovement em conformidade\n[i]note[/i]: neste modelo, fazemos o movimento \"instantâneo\". O comportamento TileMovement também pode \"animar\" o movimento ao longo do tempo. "
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "snake",
									"sid": 278646507912008,
									"parameters": {
										"instance-variable": "dir",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "direita"
								},
								{
									"id": "set-grid-position",
									"objectClass": "snake",
									"sid": 682741211073603,
									"behaviorType": "TileMovement",
									"parameters": {
										"x": "Self.TileMovement.GridX + 1",
										"y": "Self.TileMovement.GridY",
										"instant": "instant"
									}
								}
							],
							"sid": 165923617384420
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "snake",
									"sid": 177133420690045,
									"parameters": {
										"instance-variable": "dir",
										"comparison": 0,
										"value": "90"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "baixo"
								},
								{
									"id": "set-grid-position",
									"objectClass": "snake",
									"sid": 803376938468223,
									"behaviorType": "TileMovement",
									"parameters": {
										"x": "Self.TileMovement.GridX",
										"y": "Self.TileMovement.GridY+1",
										"instant": "instant"
									}
								}
							],
							"sid": 706924520724112
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "snake",
									"sid": 916024006701990,
									"parameters": {
										"instance-variable": "dir",
										"comparison": 0,
										"value": "180"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "esquerda"
								},
								{
									"id": "set-grid-position",
									"objectClass": "snake",
									"sid": 834170795842809,
									"behaviorType": "TileMovement",
									"parameters": {
										"x": "Self.TileMovement.GridX - 1",
										"y": "Self.TileMovement.GridY",
										"instant": "instant"
									}
								}
							],
							"sid": 195719024349781
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "snake",
									"sid": 370365483704794,
									"parameters": {
										"instance-variable": "dir",
										"comparison": 0,
										"value": "270"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "cima"
								},
								{
									"id": "set-grid-position",
									"objectClass": "snake",
									"sid": 631799691473361,
									"behaviorType": "TileMovement",
									"parameters": {
										"x": "Self.TileMovement.GridX",
										"y": "Self.TileMovement.GridY-1",
										"instant": "instant"
									}
								}
							],
							"sid": 220979859972079
						}
					]
				}
			]
		},
		{
			"functionName": "movePos",
			"functionDescription": "",
			"functionCategory": "move",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "snakeUID",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of the snake instance to apply to",
					"sid": 132397447762496
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 569975329002016,
			"children": [
				{
					"eventType": "comment",
					"text": "a função foi passada a UID para a instância a fim de escolher apenas aquela instância [b]snake[/b] específica "
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "snake",
							"sid": 418779362674245,
							"parameters": {
								"unique-id": "snakeUID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "guardamos em memória a sua instância anterior X e Y, na coordenada do grid"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "snake",
							"sid": 905542062756409,
							"parameters": {
								"instance-variable": "prevX",
								"value": "snake.TileMovement.GridX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "snake",
							"sid": 697014520777596,
							"parameters": {
								"instance-variable": "prevY",
								"value": "snake.TileMovement.GridY"
							}
						},
						{
							"type": "comment",
							"text": "deslocamos a instância atual para a última posição da instância anterior que foi tratada\na localização é mantida nas variáveis globais [i]nextX[/i] e [i]nextY[/i] que são atualizadas na função [i][b]setNextPos[/b][/i]"
						},
						{
							"id": "set-grid-position",
							"objectClass": "snake",
							"sid": 781791226929632,
							"behaviorType": "TileMovement",
							"parameters": {
								"x": "nextX",
								"y": "nextY",
								"instant": "instant"
							}
						}
					],
					"sid": 567637347850716
				}
			]
		},
		{
			"eventType": "variable",
			"name": "nextX",
			"type": "number",
			"initialValue": "0",
			"comment": "Alvo X no grid para a próxima instância da cobra",
			"isStatic": false,
			"isConstant": false,
			"sid": 560896809685225
		},
		{
			"eventType": "variable",
			"name": "nextY",
			"type": "number",
			"initialValue": "0",
			"comment": "Alvo Y no grid para a próxima instância da cobra",
			"isStatic": false,
			"isConstant": false,
			"sid": 182575116593396
		},
		{
			"functionName": "setNextPos",
			"functionDescription": "",
			"functionCategory": "move",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "snakeUID",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of the snake instance to apply to",
					"sid": 380408210321176
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 526606610928076,
			"children": [
				{
					"eventType": "comment",
					"text": "a função foi passada a UID para a instância a fim de escolher apenas aquela instância [b]snake[/b] específica "
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "snake",
							"sid": 924489756900436,
							"parameters": {
								"unique-id": "snakeUID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "os valores das variáveis globais [i]nextX[/i] e [i]nextY[/i] são actualizados com a localização anterior da instância [b]snake[/b] escolhida"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 998602677482803,
							"parameters": {
								"variable": "nextX",
								"value": "snake.prevX"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 314499213688911,
							"parameters": {
								"variable": "nextY",
								"value": "snake.prevY"
							}
						}
					],
					"sid": 872586928484156
				}
			]
		},
		{
			"eventType": "comment",
			"text": "entrada do jogador - definir a direção da cobra (em graus)"
		},
		{
			"eventType": "comment",
			"text": "usando o teclado (o objecto [b]Keyboard[/b] foi adicionado ao projeto), definimos a variável de instância [i]dir[/i] da cobra [i]head[/i] a fim de saber em que direção o jogador quer que a cobra se mova"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 984514277492828,
					"parameters": {
						"key": 38
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 845380225357104,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "cima"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "snake",
					"sid": 702272968757937,
					"parameters": {
						"instance-variable": "dir",
						"value": "270"
					}
				}
			],
			"sid": 891042036376088
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 164211062727611,
					"parameters": {
						"key": 39
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 395119498534719,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "direita"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "snake",
					"sid": 371516577560651,
					"parameters": {
						"instance-variable": "dir",
						"value": "0"
					}
				}
			],
			"sid": 365877663124452
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 513393089484495,
					"parameters": {
						"key": 40
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 717196984419335,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "baixo"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "snake",
					"sid": 334869003876553,
					"parameters": {
						"instance-variable": "dir",
						"value": "90"
					}
				}
			],
			"sid": 867497284897264
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 291105703357927,
					"parameters": {
						"key": 37
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 523026141263952,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "esquerda"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "snake",
					"sid": 700817366879141,
					"parameters": {
						"instance-variable": "dir",
						"value": "180"
					}
				}
			],
			"sid": 677694830102882
		},
		{
			"eventType": "comment",
			"text": "tocando numa [b]arrow[/b] (o objeto [b]Touch[/b] foi adicionado ao projeto), definimos a variável de instância [i]dir[/i] da cobra [i]head[/i] de acordo com o ângulo [b]arrow[/b] atual"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-touched-object",
					"objectClass": "Touch",
					"sid": 515745967369029,
					"parameters": {
						"object": "arrow"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 157773815284661,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "snake",
					"sid": 711936330283673,
					"parameters": {
						"instance-variable": "dir",
						"value": "arrow.Angle"
					}
				},
				{
					"type": "comment",
					"text": "fazemos a seta piscar durante meio segundo para que o leitor saiba que a sua entrada foi registada"
				},
				{
					"id": "flash",
					"objectClass": "arrow",
					"sid": 769565434059888,
					"behaviorType": "Flash",
					"parameters": {
						"on-time": "0.01",
						"off-time": "0.01",
						"duration": "0.5"
					}
				}
			],
			"sid": 877456533759348
		},
		{
			"eventType": "comment",
			"text": "quando o jogo terminar, o [b]btnRestart[/b] é visível e pode ser tocado a fim de reiniciar o jogo"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-touched-object",
					"objectClass": "Touch",
					"sid": 668238192981418,
					"parameters": {
						"object": "btnRestart"
					}
				},
				{
					"id": "is-visible",
					"objectClass": "btnRestart",
					"sid": 402034443949754
				}
			],
			"actions": [
				{
					"id": "restart-layout",
					"objectClass": "System",
					"sid": 782845250878645
				}
			],
			"sid": 420251921113381
		},
		{
			"eventType": "comment",
			"text": "cria uma nova parte de cobra"
		},
		{
			"functionName": "spawnSnakePart",
			"functionDescription": "",
			"functionCategory": "inGame",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 895237104084344,
			"children": [
				{
					"eventType": "comment",
					"text": "escolhemos a última instância [b]snake[/b] (a sua UID é mantida na variável global [i]lastUID[/i]) a fim de criar uma nova instância [b]snake[/b]"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "snake",
							"sid": 990331474173040,
							"parameters": {
								"unique-id": "lastUID"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 249538583030865,
							"parameters": {
								"object-to-create": "snake",
								"layer": "0",
								"x": "snake.X",
								"y": "snake.Y",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "asseguramos que só temos uma única [i]head[/i] para a cobra, definindo o valor da variável de instância como falso em novas instâncias "
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "snake",
							"sid": 652891242445718,
							"parameters": {
								"instance-variable": "head",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "[i]lastUID[/i] é o Identificador Único da última instância da cobra. Mantemos como referência para quando precisamos de criar uma nova instância [b]snake[/b]."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 311881152802508,
							"parameters": {
								"variable": "lastUID",
								"value": "snake.UID"
							}
						}
					],
					"sid": 765610753780318
				}
			]
		},
		{
			"eventType": "comment",
			"text": "cria toEat"
		},
		{
			"functionName": "spawnToEat",
			"functionDescription": "",
			"functionCategory": "inGame",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "criamos uma instância [b]toEat[/b] numa posição aleatória na área de jogo (entre as paredes)"
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 821627402350212,
					"parameters": {
						"object-to-create": "toEat",
						"layer": "0",
						"x": "int(random(LayoutWidth - 32)/16) * 16",
						"y": "int(random(LayoutHeight/2 - 32)/16) * 16",
						"create-hierarchy": false
					}
				}
			],
			"sid": 193850040617658
		},
		{
			"eventType": "comment",
			"text": "colisão da cobra"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 739315285688723,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [],
			"sid": 345295282415479,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "snake",
							"sid": 235642215477834,
							"parameters": {
								"object": "toEat"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "toEat",
							"sid": 644397376511942
						},
						{
							"callFunction": "spawnSnakePart",
							"sid": 819237306380277
						},
						{
							"callFunction": "spawnToEat",
							"sid": 838311620947809
						},
						{
							"callFunction": "checkEaten",
							"sid": 663828402668707
						}
					],
					"sid": 455907417653243
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "snake",
							"sid": 269729507915933,
							"parameters": {
								"object": "wall"
							}
						}
					],
					"actions": [
						{
							"callFunction": "gameOver",
							"sid": 332332061047521
						}
					],
					"sid": 887486719974538
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "snake",
					"sid": 442441387618773,
					"parameters": {
						"object": "snake"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "snake",
					"sid": 207154054200889,
					"parameters": {
						"instance-variable": "head"
					}
				}
			],
			"actions": [
				{
					"callFunction": "gameOver",
					"sid": 329055722188177
				}
			],
			"sid": 598834101492555
		},
		{
			"eventType": "comment",
			"text": "relacionado com a modificação da velocidade da serpente"
		},
		{
			"functionName": "checkEaten",
			"functionDescription": "",
			"functionCategory": "inGame",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "a velocidade da cobra é modificada e sobe à medida que os objetos [b]aEat[/b] são comidos\n[i]eaten[/i] é incrementado e também atua como a pontuação geral\n[i]iterations[/i] correspondem ao número de [b]toEat[/b] que foram comidas no \"loop\" atual"
				},
				{
					"id": "add-to-eventvar",
					"objectClass": "System",
					"sid": 889999879177090,
					"parameters": {
						"variable": "eaten",
						"value": "1"
					}
				},
				{
					"id": "add-to-eventvar",
					"objectClass": "System",
					"sid": 350775344513719,
					"parameters": {
						"variable": "iterations",
						"value": "1"
					}
				}
			],
			"sid": 593581770223707,
			"children": [
				{
					"eventType": "comment",
					"text": "se [i]iterations[/i] for maior ou igual ao valor de [i]eatenMod[/i]..."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 645979944664993,
							"parameters": {
								"variable": "iterations",
								"comparison": 5,
								"value": "eatenMod"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "a velocidade da cobra é modificada e sobe à medida que os objetos [b]toEat[/b] são comidos\n[i]eaten[/i] é incrementado e também atua como a pontuação geral\n[i]iterations[/i] correspondem ao número de [b]toEat[/b] que foram comidas no \"loop\" atual"
						},
						{
							"type": "comment",
							"text": "aumentar o valor de [i]eatenMod[/i] em 1"
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 666543476476166,
							"parameters": {
								"variable": "eatenMod",
								"value": "1"
							}
						},
						{
							"type": "comment",
							"text": "repor o valor de [i]iterations[/i] para 0; este é um novo \"loop\""
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 895910946019649,
							"parameters": {
								"variable": "iterations",
								"value": "0"
							}
						},
						{
							"type": "comment",
							"text": "baixar o valor de [i]freq[/i] que terá o efeito de mover a cobra com mais frequência, movendo-a mais rapidamente\na expressão do sistema [i]clamp()[/i] existe para garantir que o valor de [i]freq[/i] se mantém em valores que mantêm o jogo manejável e divertido para o jogador. O valor mínimo é 0,025 (segundo) e quando a cobra é a mais lenta, é movida a 0,30 segundos"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 589940323623272,
							"parameters": {
								"variable": "freq",
								"value": "clamp(freq-dt,0.025,0.30)"
							}
						},
						{
							"type": "comment",
							"text": "criar um adicional [b]toEat[/b] para manter o jogo a funcionar e oferecer mais possibilidades ao jogador\nisto também atua como um jogo mais difícil, pois a serpente continuará a crescer quando comer [b]toEat[/b] tornando o espaço de jogo mais pequeno para o jogador"
						},
						{
							"callFunction": "spawnToEat",
							"sid": 746043022307233
						}
					],
					"sid": 618999935626896
				}
			]
		},
		{
			"eventType": "comment",
			"text": "função chamada quando o jogo termina (a cobra mordeu a si própria ou uma parede)"
		},
		{
			"functionName": "gameOver",
			"functionDescription": "",
			"functionCategory": "gameOver",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "definir a variável global [i]alive[/i] para falsa, a cobra não será movida mais"
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 491131134913969,
					"parameters": {
						"variable": "alive",
						"value": "false"
					}
				},
				{
					"type": "comment",
					"text": "a cobra pisca indefinidamente "
				},
				{
					"id": "flash",
					"objectClass": "snake",
					"sid": 114131612215960,
					"behaviorType": "Flash",
					"parameters": {
						"on-time": "0.1",
						"off-time": "0.1",
						"duration": "Infinity"
					}
				},
				{
					"type": "comment",
					"text": "[b]btnRestart[/b] é exibido, o jogador pode tocar nele para reiniciar o jogo"
				},
				{
					"id": "set-visible",
					"objectClass": "btnRestart",
					"sid": 189155415787124,
					"parameters": {
						"visibility": "visible"
					}
				}
			],
			"sid": 858791004316158,
			"children": [
				{
					"eventType": "comment",
					"text": "se o jogo não for executado em celular (assumimos que no computador desktop, com um teclado) exibimos um texto convidando o jogador a pressionar F5 para reiniciar, alternativa ao toque [b]btnRestart[/b]\nisto é possível graças à adição do objeto [b]PlatformInfo[/b] ao projeto"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-mobile",
							"objectClass": "PlatformInfo",
							"sid": 126503253255478,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "txtGameOver",
							"sid": 325895910488718,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-text",
							"objectClass": "txtGameOver",
							"sid": 470629649046455,
							"parameters": {
								"text": "\"Press F5 to restart\""
							}
						}
					],
					"sid": 908035967745853,
					"disabled": true
				}
			]
		},
		{
			"eventType": "comment",
			"text": "verifica se [b]toEat[/b] é criado numa parte da cobra ou numa parede; se for, destrói e cria uma nova"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-created",
					"objectClass": "toEat",
					"sid": 422365088718613
				}
			],
			"actions": [],
			"sid": 765265855056133,
			"children": [
				{
					"eventType": "comment",
					"text": "verificamos se, na criação, [b]toEat[/b] está a sobrepor uma parede ou a uma parte de uma cobra"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "toEat",
							"sid": 314222781353326,
							"parameters": {
								"object": "wall"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "toEat",
							"sid": 324594675812618,
							"parameters": {
								"object": "Bg_proibido"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "toEat",
							"sid": 603867808123526,
							"parameters": {
								"object": "snake"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "toEat",
							"sid": 727483536917738
						},
						{
							"callFunction": "spawnToEat",
							"sid": 109223986366475
						},
						{
							"id": "destroy",
							"objectClass": "toEat",
							"sid": 425667121225165
						}
					],
					"sid": 518794650618956,
					"isOrBlock": true
				}
			]
		},
		{
			"eventType": "comment",
			"text": "mover a cobra a cada [i]freq[/i] segundos, atualizar a pontuação exibida"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 838282251995867,
					"parameters": {
						"variable": "alive"
					}
				},
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 350668137156740,
					"parameters": {
						"interval-seconds": "freq"
					}
				}
			],
			"actions": [
				{
					"callFunction": "moveSnake",
					"sid": 981801322674217
				},
				{
					"id": "set-text",
					"objectClass": "txtScore",
					"sid": 786986135446427,
					"parameters": {
						"text": "\"Pontos: \" & eaten"
					}
				}
			],
			"sid": 508447182381046
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 559761551540436,
					"parameters": {
						"variable": "eaten",
						"comparison": 5,
						"value": "15"
					}
				}
			],
			"actions": [
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 857158255933755,
					"parameters": {
						"layout": "Restaurante"
					}
				}
			],
			"sid": 693809163554091
		}
	],
	"sid": 458205160109742
}